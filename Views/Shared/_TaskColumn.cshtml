@* PartialView/_TaskColumn.cshtml *@
@model TaskColumnViewModel

<div class="task-column bg-gray-800/60 backdrop-blur-sm rounded-xl border border-gray-700/50 shadow-xl overflow-hidden hover:border-gray-600 transition-all duration-300"
     data-status="@Model.Status"
     data-status-id="@Model.StatusId"
     data-page="1"
     data-page-size="@Model.PageSize"
     data-has-more="@(Model.TotalCount > Model.Tasks.Count ? "true" : "false")">
    <div class="bg-gradient-to-r from-gray-800 to-gray-800/80 px-4 py-3 border-b border-gray-700/50">
        <div class="flex items-center justify-between">
            <div class="flex items-center gap-2.5">
                <div class="w-2.5 h-2.5 @Model.StatusColor rounded-full shadow-lg"></div>
                <h3 class="font-bold text-gray-100 text-xs tracking-wider">@Model.StatusTitle</h3>
                <span class="bg-gray-700/50 text-gray-300 text-xs font-bold px-2 py-0.5 rounded-full min-w-[24px] text-center">
                    @Model.Tasks.Count / @Model.TotalCount
                </span>
            </div>
        </div>
    </div>

    <div class="task-list p-3 space-y-3 max-h-[calc(100vh-140px)] overflow-y-auto custom-scroll" data-status="@Model.Status">
        @if (Model.Tasks.Any())
        {
            @foreach (var task in Model.Tasks)
            {
                <partial name="_TaskCard" model="task" />
            }
            @if (Model.TotalCount > Model.Tasks.Count)
            {
                <div class="loading-indicator hidden flex flex-col items-center justify-center py-4">
                    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500"></div>
                    <p class="text-gray-400 text-xs mt-2">Đang tải...</p>
                </div>
            }
        }
        else
        {
            <div class="flex flex-col items-center justify-center py-8 text-gray-500 empty-state">
                <i data-lucide="inbox" class="w-12 h-12 mb-2 opacity-50"></i>
                <p class="text-sm">Không có nhiệm vụ</p>
            </div>
        }
    </div>
</div>